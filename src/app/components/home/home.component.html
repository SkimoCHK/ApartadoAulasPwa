<div class="home-container">
  <!-- Indicador de estado offline -->
  <app-offline-indicator></app-offline-indicator>

  <!-- Header -->
  <header class="header">
    <button class="menu-button">
      <span class="menu-icon"></span>
      <span class="menu-icon"></span>
      <span class="menu-icon"></span>
    </button>
    <img src="assets/utslogo.png" alt="UTS Logo" class="logo" />
  </header>

  <!-- Main Content -->
  <div class="content">
    <!-- Welcome Section -->
    <div class="welcome-section">
      <h1 class="welcome-title">Bienvenido, {{ userName }}</h1>
      <p class="welcome-subtitle">Resumen de tu actividad y accesos rápidos</p>
    </div>

    <!-- Stats Cards -->
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-icon calendar-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
        </div>
        <div class="stat-info">
          <div class="stat-number">{{ totalReservas }}</div>
          <div class="stat-label">Total de reservas</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon clock-icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
        </div>
        <div class="stat-info">
          <div class="stat-number">{{ reservasActivas }}</div>
          <div class="stat-label">Activas</div>
        </div>
      </div>
    </div>

    <div class="section">
      <h2 class="section-title">Próximas reservas</h2>

      <div class="proximas-reservas-list">
        <div
          *ngIf="proximasReservas.length === 0 && !loading"
          class="no-reservas"
        >
          No tienes próximas reservas.
        </div>

        <div *ngIf="loading" class="loading-spinner">Cargando reservas...</div>

        <div
          *ngFor="let reserva of proximasReservas"
          class="reserva-card-proximas"
        >
          <div class="reserva-content">
            <h3 class="reserva-name">
              {{ reserva.aula.nombre || reserva.motivo }}
            </h3>

            <p class="reserva-datetime">
              {{ getDayName(reserva.fecha) }}
              {{ formatDate(reserva.fecha) }}
              •
              {{ formatTime(reserva.horaInicio) }} -
              {{ formatTime(reserva.horaFin) }}
            </p>
          </div>

          <div class="reserva-badge" [ngClass]="getStatusClass(reserva.estado)">
            {{ reserva.estado }}
          </div>
        </div>
      </div>
    </div>
    
    <!-- Accesos Rápidos -->
    <div class="section">
      <h2 class="section-title">Accesos rápidos</h2>

      <div class="quick-access-grid">
        <button
          class="quick-access-card"
          routerLink="/nueva-reserva"
          routerLinkActive="active"
        >
          <div class="quick-icon add-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="8" x2="12" y2="16"></line>
              <line x1="8" y1="12" x2="16" y2="12"></line>
            </svg>
          </div>
          <span class="quick-label">Nueva reserva</span>
        </button>

        <button class="quick-access-card" (click)="onHistorial()">
          <div class="quick-icon history-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
          </div>
          <span class="quick-label">Historial</span>
        </button>

        <button class="quick-access-card" (click)="onPerfil()">
          <div class="quick-icon profile-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
          <span class="quick-label">Perfil</span>
        </button>

        <button class="quick-access-card" (click)="onLogout()">
          <div class="quick-icon help-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="32"
              height="32"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
              <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
          </div>
          <span class="quick-label">Soporte</span>
        </button>
      </div>
    </div>
  </div>
</div>